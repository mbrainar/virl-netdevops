<devices xmlns="http://tail-f.com/ns/ncs">
  <authgroups>
    <group>
      <name>virl</name>
      <default-map>
        <remote-name>cisco</remote-name>
        <remote-password>cisco</remote-password>
      </default-map>
      <umap>
        <local-user>admin</local-user>
        <remote-name>cisco</remote-name>
        <remote-password>cisco</remote-password>
      </umap>
    </group>
  </authgroups>
  {% for node in context %}
  <device>
    <name>{{ node.node_label }}</name>
    <address>{{ node.address[0] }}</address>
    <ssh>
      <host-key-verification>none</host-key-verification>
    </ssh>
    <authgroup>virl</authgroup>
    <device-type>
      <cli>
        <ned-id xmlns:{{ node.ned.prefix }}="{{ node.ned.ns }}">{{ node.ned.prefix }}:{{ node.ned.ned }}</ned-id>
        <protocol>ssh</protocol>
      </cli>
    </device-type>
    <state>
      <admin-state>unlocked</admin-state>
    </state>
  </device>
  {% endfor %}
</devices>
